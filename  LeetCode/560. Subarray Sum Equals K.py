from typing import List

"""
1. ìˆ˜í•™ì  ê°œë…
ìš°ë¦¬ê°€ ë¶€ë¶„ ë°°ì—´ì˜ í•©ì„ êµ¬í•  ë•Œ, ë‘ ì¸ë±ìŠ¤ i, j(i â‰¤ j) ì‚¬ì´ì˜ í•©ì€ ëˆ„ì í•©ì„ ì´ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„ ê°€ëŠ¥:
sum(i,j) = prefixSum[j] âˆ’ prefixSum[iâˆ’1]
ì¦‰, prefixSum[j]ëŠ” 0ë²ˆë¶€í„° jë²ˆê¹Œì§€ì˜ ëˆ„ì í•©, prefixSum[i-1]ì€ 0ë²ˆë¶€í„° i-1ë²ˆê¹Œì§€ì˜ ëˆ„ì í•©.
ì´ì œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²ƒì€ ì–´ë–¤ ë¶€ë¶„í•© sum(i, j)ê°€ kê°€ ë˜ëŠ” ê²½ìš°ë¥¼ ì°¾ëŠ” ê²ƒ.
prefixSum[j] âˆ’ prefixSum[iâˆ’1] = k
prefixSum[ð‘–âˆ’1] = prefixSum[ð‘—] âˆ’ ð‘˜
prefixSum[iâˆ’1] = prefixSum[j] âˆ’ k
ì¦‰, prefixSum[j] - k ê°’ì´ ê¸°ì¡´ì˜ prefixSum[i-1] ì¤‘ì— ì¡´ìž¬í•œë‹¤ë©´, í•´ë‹¹ ë¶€ë¶„ë°°ì—´ì´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²ƒ!

2. í•´ì‹œë§µ(HashMap) í™œìš©
ìœ„ ìˆ˜ì‹ì„ í™œìš©í•˜ê¸° ìœ„í•´, prefixSum[j] ê°’ì„ ê³„ì‚°í•˜ë©´ì„œ, prefixSum[i-1] = prefixSum[j] - k ê°€ ì¡´ìž¬í•˜ëŠ”ì§€ë¥¼ ë¹ ë¥´ê²Œ ì°¾ìœ¼ë©´ ë¨. 
ì—¬ê¸°ì„œ í•´ì‹œë§µ(ë”•ì…”ë„ˆë¦¬)ë¥¼ ì´ìš©í•˜ë©´ O(1) ì‹œê°„ ì•ˆì— í•´ë‹¹ ê°’ì´ ì¡´ìž¬í•˜ëŠ”ì§€ë¥¼ í™•ì¸ ê°€ëŠ¥

ì•Œê³ ë¦¬ì¦˜ íë¦„
ëˆ„ì í•©ì„ ê³„ì‚°í•˜ë©´ì„œ
prefixSum[j] - kê°€ prefixSum ê¸°ë¡ëœ ê°’ì— ì¡´ìž¬í•˜ëŠ”ì§€ í™•ì¸
ì¡´ìž¬í•œë‹¤ë©´ í•´ë‹¹ prefixSum[i-1]ê°€ prefixSum[j] - kì™€ ê°™ì€ ê°’ì´ë¯€ë¡œ ì¡°ê±´ ë§Œì¡±í•˜ëŠ” ë¶€ë¶„ ë°°ì—´ ê°œìˆ˜ë¥¼ ë”í•¨
í˜„ìž¬ prefixSum[j]ë¥¼ í•´ì‹œë§µì— ì €ìž¥í•˜ì—¬ ì´í›„ íƒìƒ‰ì— í™œìš©
"""


class Solution:
    """
    numsê°€ 1, 2, 1, 3 ì´ê³  ë“¤ì–´ì˜¤ê³  kê°€ 3ì¸ê²½ìš°
    1. ì¤‘ì²©í•´ì„œ ë”í•´ì£¼ëŠ” ê°’ì„ í•´ì‰¬í…Œì´ë¸”ì— ì €ìž¥ {0,1,3,4,7} 0ì„ ë„£ì–´ì£¼ëŠ” ì´ìœ ëŠ” 2ë²ˆì—ì„œ ì„¤ëª…í•œë‹¤
    2. 3ì„ ë”í•´ì•¼í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ êµ¬í•œë‹¤ (0 -> 3), (1 -> 4), (4 -> 7) í•´ì‰¬í…Œì´ë¸”ì— 0ì„ ì•ˆë„£ì–´ì¤¬ìœ¼ë©´ 3ì€ í¬í•¨ì´ ì•ˆë˜ë‹ˆê¹ ë„£ì–´ì¤€ê±°ë‹¤.
    """

    def subarraySum(self, nums: List[int], k: int) -> int:
        hash_table = {0: 1}
        prefix_sum = 0
        result = 0
        for value in nums:
            prefix_sum += value
            if prefix_sum - k in hash_table:
                result += hash_table[prefix_sum - k]
            hash_table[prefix_sum] = hash_table.get(prefix_sum, 0) + 1
        return result


a = Solution()
print(a.subarraySum([1, 1, 1], 2))
print(a.subarraySum([1, 2, 3], 3))
print(a.subarraySum([1, 2, 1, 3], 3))
print(a.subarraySum([3, 4, 7, -2, 2, 1, 4, 2], 7))
